<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>KMS</title>

	<link href="foundation.css" rel="stylesheet"> </link>
	
	<link rel="stylesheet" href="./app.css" type="text/css" media="all" />

	<link rel="stylesheet" href="./d3-context-menu.css" type="text/css" media="all" />

	<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />

	<!--<script src="https://kit.fontawesome.com/4e3c5501e7.js" crossorigin="anonymous"></script>-->

	<!--
		{{style('arbol/foundation.css')}} 
		{{style('arbol/app.css')}} 
	{{style('arbol/d3-context-menu.css')}} 
	{{style('arbol/select2.css')}}-->

</head>

<body>
	<div class="container-scroller">
		<div class="main-panel">
			<div class="row">
				<div class="col-md-12 grid-margin">	
					<!--MODAL PARA RENOMBRAR NODO-->
					<div id="RenameNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
						role="dialog">
						<h2 id="modalTitle">Rename Node</h2>
						<form id="RenameNodeForm">
						<div class="row">
							<div class="large-12 columns">
							<label>Node name
								<input type="text" class="inputName" id='RenameNodeName' placeholder="node name" />
							</label>
							</div>
						</div>
						<div class="row">
							<div class="large-8 columns">
							&nbsp;
							</div>
							<div class="large-4 columns">
							<a href="#" class="button info" onclick="close_rename_node_modal()">Cancel</a>
							<a href="#" class="button success" onclick="rename_node()">Rename</a>
							</div>
						</div>
						</form>
						<a class="close-reveal-modal" aria-label="Close">&#215;</a>
					</div>

					<!--MODAL PARA CEAR NODO-->
					<div id="CreateNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
						role="dialog">
						<h2 id="modalTitle">Create Node</h2>
						<form id="CreateNodeForm">
						<div class="row">
							<div class="large-12 columns">
							<label>Node name
								<input type="text" class="inputName" id='CreateNodeName' placeholder="node name" />
							</label>
							</div>
						</div>
						<div class="row">
							<div class="large-8 columns">
							&nbsp;
							</div>
							<div class="large-4 columns">
							<a href="#" class="button info" onclick="close_create_node_modal()">Cancel</a>
							<a href="#" class="button success" onclick="create_node()">Create</a>
							</div>
						</div>
						</form>
						<a class="close-reveal-modal" aria-label="Close">&#215;</a>
					</div>
					<!--MODAL PARA AÃ‘ADIR UN NUEVO PADRE AL NODO-->

					<div id="NewParentModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
						role="dialog">

						<select id="nodesSelect" class="js-example-basic-multiple" style="width:50%">

						</select>
						<div class="row">
						<div class="large-8 columns">
							&nbsp;
						</div>
						<div class="large-4 columns">
							<a href="#" class="button success" onclick="createParentConection()">Create</a>
						</div>
						</div>
					</div>
						
					<!--MODAL PARA BORRAR UN  PADRE AL NODO-->
					<div id="DeleteParentModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
						role="dialog">
						<select id="deleteParentSelect" class="js-example-basic-multiple" style="width:50%">
						</select>
						<div class="row">
						<div class="large-8 columns">
							&nbsp;
						</div>
						<div class="large-4 columns">
							<a href="#" class="button success" onclick="deleteParent()">Delete</a>
						</div>
						</div>
					</div>
						
					<div id="DeleteNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
						role="dialog">

						<select id="optionsDelete" class="js-example-basic-multiple" style="width:50%">
						<option value="1">Borrar Todos</option>
						<option value="2">Hacer padre al abuelo</option>
						<option value="3">Cambiar de padre a un hijo</option>
						<option value="4">Cambiar de padre</option>
						</select>




						<select id="nodesSelectAllDelete" name="selectName" class="js-example-basic-multiple" style="width:50%">
						</select>


						<select id="nodesSelectChildNewParent" name="selectName" class="js-example-basic-multiple" style="width:50%">
						</select>


						<div class="row">
						<div class="large-8 columns">
							&nbsp;
						</div>
						<div class="large-4 columns">
							<a href="#" class="button success" onclick="delete_node(node_to_delete)">Aceptar</a>
						</div>
						</div>
					</div>

					<div id="tree-container" style="width: 50%; height: 50%; ">
						<input type="checkbox" class="custom-control-input" id="horizontalVertical">
						<label class="custom-control-label" for="horizontalVertical">Horizontal</label>

						<input type="checkbox" class="custom-control-input" checked="true" id="showNames">
						<label class="custom-control-label" for="showNames">Mostrar nombre del nodo</label>

						<input type="checkbox" class="custom-control-input" checked="true" id="showNumber">
						<label class="custom-control-label" for="showNumber">Mostrar valor del nodo</label>		
					</div>
				
					<!--MODAL PARA PREGUNTAS-->
					<div id="QuestionModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true"
						role="dialog">
						<h2 id="modalTitle">Preguntas</h2>
						<form id="QuestionForm">

						<div>
							<ol id="questionList">
							</ol>
						</div>
						</form>
						<a class="close-reveal-modal" aria-label="Close">&#215;</a>
					</div>
				</div>
			</div>
		</div>

	</div>


	<script src="jquery.js" type="text/javascript"> </script>
	<script src="d3.v3.min.js" type="text/javascript"> </script>
	<script src="treeFunctions.js" type="text/javascript"> </script>
	<script src="dndTree.js" type="text/javascript"> </script>
	<script src="d3-context-menu.js" type="text/javascript"> </script>
	<script src="underscore-min.js" type="text/javascript"> </script>
	<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js" type="text/javascript"> </script>
	<script src="jquery.js" type="text/javascript"> </script>
	<script src="fastclick.js" type="text/javascript"> </script>
	<script src="foundation.min.js" type="text/javascript"> </script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js" type="text/javascript"> </script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" type="text/javascript"> </script>

	<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

	<script>
		// for the first initialization
		$('document').ready(function(){
			cristian();
			$(document).foundation();
			$(document).on('opened', '[data-reveal]', function () {
				var element = $(".inputName:visible").first();
				element.focus(function(){
					this.selectionStart = this.selectionEnd = this.value.length;
				});
				element.focus();
			});
			$('#RenameNodeForm').submit(function(e){
					rename_node();
					return false;
			});
			$('#CreateNodeForm').submit(function(e){
					create_node();
					return false;
			});
			var treeJSON = d3.json("tree.json", draw_tree);
		});


		function cristian(){

$('.js-example-basic-multiple').select2();

$('#nodesSelect').select2();

$('#nodesSelectAllDelete').select2();
$('#nodesSelectChildNewParent').select2();
$('#nodesSelectAllDelete').next(".select2-container").hide();
$('#nodesSelectChildNewParent').next(".select2-container").hide();

$("#horizontalVertical").change(function (e) {
	// alert("Handler for .change() called. ");

	horizontalVertical = !horizontalVertical;
	outer_update(tree_root);

});



$("#textPosition").change(function (e) {
	textPosition = !textPosition;
});


$("#textPositionRename").change(function (e) {
	textPosition = !textPosition;
});

$("#orienta").change(function (e) {
	outer_update(tree_root);

});

$("#showNames").change(function (e) {
	showNames = !showNames;
	outer_update(tree_root);

});

$("#showNumber").change(function (e) {
	showNumber = !showNumber;

	outer_update(tree_root);

});



var $optionsDelete = $("#optionsDelete").select2().on("change", function (e) {

	var optionsS = $('#optionsDelete').select2('data')
	let deleteOption = optionsS[0]['id'];
	if (deleteOption == 4) {
		$('#nodesSelectAllDelete').next(".select2-container").show();
		$('#nodesSelectChildNewParent').next(".select2-container").hide();

	} else if (deleteOption == 3) {
		$('#nodesSelectChildNewParent').next(".select2-container").show();
		$('#nodesSelectAllDelete').next(".select2-container").hide();
	} else {
		$('#nodesSelectAllDelete').next(".select2-container").hide();
		$('#nodesSelectChildNewParent').next(".select2-container").hide();

	}
	
});


		$(document).foundation();
		$(document).on('opened', '[data-reveal]', function () {
			var element = $(".inputName:visible").first();
			element.focus(function () {
				this.selectionStart = this.selectionEnd = this.value.length;
			});
			element.focus();
		});
		$('#RenameNodeForm').submit(function (e) {
			rename_node();
			return false;
		});
		$('#CreateNodeForm').submit(function (e) {
			create_node();
			return false;
		});
		/*$("/public/arbol/d3.v3.min.js", function(){
		var treeJSON = d3.json("tree.json", draw_tree);
		});*/
		
							
		}
	</script>



	<!--{{script('/arbol/d3.v3.min.js')}} 
	{{script('/arbol/treeFunctions.js')}} 
	{{script('/arbol/dndTree.js')}} 
	{{script('/arbol/d3-context-menu.js')}} 
	{{script('/arbol/underscore-min.js')}} 
	{{script('https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js')}}
	{{script('/arbol/jquery.js')}} 
	{{script('/arbol/fastclick.js')}} 
	{{script('/arbol/foundation.min.js')}} 
	{{script('https://unpkg.com/sweetalert/dist/sweetalert.min.js')}} 
	{{script('https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js')}} -->

</body>

</html>